<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>whoisrulled</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <header class="site-header" id="siteHeader">
        <div class="container header-container">
            <div class="logo">
                <a href="#">Maxim Pavlov</a>
            </div>
            <nav class="main-nav" id="mainNav">
                <ul>
                    <li><a href="#hero-section">Главная</a></li>
                    <li><a href="#projects">Работы</a></li>
                    <li><a href="#about">Обо мне</a></li>
                    <li><a href="#contact" class="nav-contact-link">Контакты</a></li>
                </ul>
            </nav>
            <button class="burger-menu" id="burgerMenu" aria-label="Открыть меню" aria-expanded="false" aria-controls="mainNav">
                <span class="burger-menu-line"></span>
                <span class="burger-menu-line"></span>
                <span class="burger-menu-line"></span>
            </button>
        </div>
    </header>

    <section class="hero" id="hero-section">
        <div class="container">
            <h1 class="animate-on-scroll fade-in-up delay-1">Maxim Pavlov</h1>
            <p class="subtitle animate-on-scroll fade-in-up delay-2">art director, motion-design, video production</p>
        </div>
    </section>

    <main>
        <section id="projects" class="projects-section">
            <div class="container">
                <h2 class="animate-on-scroll fade-in-up">Последние работы</h2>

                <div class="project-item layout-video-left animate-on-scroll fade-in-up">
                    <div class="project-video">
                        <div style="padding:56.25% 0 0 0;position:relative;" class="vimeo-responsive-wrapper">
                            <iframe id="vimeo-player-1" src="https://player.vimeo.com/video/1090646757?badge=0&autopause=0&player_id=0&app_id=58479&autoplay=1&muted=1&loop=1" frameborder="0" allow="autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media" style="position:absolute;top:0;left:0;width:100%;height:100%;" title="sqwore - shqcore"></iframe>
                        </div>
                    </div>
                    <div class="project-description">
                        <h3><a href="https://www.instagram.com/reel/DJ1KvNkMEbK/" target="_blank" rel="noopener noreferrer">sqwore - shqcore</a></h3>
                        <p class="project-meta">editing, color correction, vfx</p>
                        <p>тизер к треку с альбома. отвечал за монтаж, цветкор, а также конечную заставку. вместе с арт-директором volhuena нашли необходимые референсы, воплотили общее видение и сделали тизер максимально цепляющим.</p>
                    </div>
                </div>

                <div class="project-item layout-video-right animate-on-scroll fade-in-up">
                    <div class="project-description">
                        <h3><a href="https://youtu.be/ALYyniGTHtc/" target="_blank" rel="noopener noreferrer">kayyo - ILM</a></h3>
                        <p class="project-meta">editing, vfx</p>
                        <p>главной задачей было выжать максимум динамики из кадров камкодера для тизера альбома.</p>
                    </div>
                    <div class="project-video">
                        <div style="padding:80% 0 0 0;position:relative;" class="vimeo-responsive-wrapper">
                            <iframe id="vimeo-player-2" src="https://player.vimeo.com/video/1090666938?h=bf2ee708f9&badge=0&autopause=0&player_id=0&app_id=58479&autoplay=1&muted=1&loop=1" frameborder="0" allow="autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media" style="position:absolute;top:0;left:0;width:100%;height:100%;" title="kayyo - ILM"></iframe>
                        </div>
                    </div>
                </div>

                <div class="project-item layout-video-left animate-on-scroll fade-in-up">
                    <div class="project-video">
                        <div style="padding:66.75% 0 0 0;position:relative;" class="vimeo-responsive-wrapper">
                            <iframe id="vimeo-player-3" src="https://player.vimeo.com/video/1090653148?badge=0&autopause=0&player_id=0&app_id=58479&autoplay=1&muted=1&loop=1" frameborder="0" allow="autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media" style="position:absolute;top:0;left:0;width:100%;height:100%;" title="sqwore - protagonist"></iframe>
                        </div>
                    </div>
                    <div class="project-description">
                        <h3><a href="https://youtu.be/sw_rJXu8NpY" target="_blank" rel="noopener noreferrer">sqwore - protagonist</a></h3>
                        <p class="project-meta">directed, camera, editing</p>
                        <p>в этом проекте я взял на себя полный цикл. задача была – создать атмосферное муд-видео, которое бы тонко передавало настроение трека. искал простые, но стильные решения.</p>
                    </div>
                </div>

                <div class="project-item layout-video-right animate-on-scroll fade-in-up">
                    <div class="project-description">
                        <h3><a href="https://youtu.be/UJYSnJipLuc" target="_blank" rel="noopener noreferrer">thes1cko - молния mcqueen</a></h3>
                        <p class="project-meta">editing, color correction, vfx</p>
                        <p>стояла задача сделать клип максимально динамичным. я сосредоточился на получении динамики за счет сумасшедшой смены кадров, а атмосферу удалось получить за счет правильной цветокоррекции.</p>
                    </div>
                    <div class="project-video">
                        <div style="padding:41.04% 0 0 0;position:relative;" class="vimeo-responsive-wrapper">
                            <iframe id="vimeo-player-4" src="https://player.vimeo.com/video/1090647765?badge=0&autopause=0&player_id=0&app_id=58479&autoplay=1&muted=1&loop=1" frameborder="0" allow="autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media" style="position:absolute;top:0;left:0;width:100%;height:100%;" title="thes1cko - молния mcqueen"></iframe>
                        </div>
                    </div>
                </div>

                <div class="project-item layout-video-left animate-on-scroll fade-in-up">
                    <div class="project-video">
                        <div style="padding:42.5% 0 0 0;position:relative;" class="vimeo-responsive-wrapper">
                            <iframe id="vimeo-player-5" src="https://player.vimeo.com/video/1090647026?badge=0&autopause=0&player_id=0&app_id=58479&autoplay=1&muted=1&loop=1" frameborder="0" allow="autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media" style="position:absolute;top:0;left:0;width:100%;height:100%;" title="tears, OYO, drowsyy — актриса"></iframe>
                        </div>
                    </div>
                    <div class="project-description">
                        <h3><a href="https://youtu.be/F0CANwIEoKs" target="_blank" rel="noopener noreferrer">tears, OYO, drowsyy — актриса</a></h3>
                        <p class="project-meta">directed, camera, editing</p>
                        <p>задача для этого тизера – сделать простое, но красивое музыкальное видео. я отвечал за весь процесс, от разработки концепции и съемки до монтажа, стремясь создать визуально приятный и лаконичный ролик, который бы легко знакомил с треком.</p>
                    </div>
                </div>

                <div class="project-item layout-video-right animate-on-scroll fade-in-up">
                    <div class="project-description">
                        <h3><a href="https://www.instagram.com/p/DJo9Dstsl9D/" target="_blank" rel="noopener noreferrer">kayyo, emi4ka - overhype sample kit</a></h3>
                        <p class="project-meta">motion design</p>
                        <p>здесь я анимировал обложку для сэмпл-кита, чтобы создать живую визуализацию под музыку. для этого использовал связку freqreact + tracery, чтобы элементы дизайна реагировали на звук и создавали интересный визуальный опыт.</p>
                    </div>
                    <div class="project-video">
                        <div style="padding:100% 0 0 0;position:relative;" class="vimeo-responsive-wrapper">
                            <iframe id="vimeo-player-6" src="https://player.vimeo.com/video/1090646413?badge=0&autopause=0&player_id=0&app_id=58479&autoplay=1&muted=1&loop=1" frameborder="0" allow="autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media" style="position:absolute;top:0;left:0;width:100%;height:100%;" title="kayyo, emi4ka - overhype sample kit"></iframe>
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <section id="about" class="about-section">
            <div class="container">
                <h2 class="animate-on-scroll fade-in-up">Обо мне</h2>
                <p class="animate-on-scroll fade-in-up delay-1">привет! меня зовут максим и я очень люблю создавать видео. моя цель - доносить до людей идеи заказчиков при помощи визуала. я верю, что качественный визуал поможет любому проекту выделиться и привлечь внимание. в основном, я специализируюсь на музыкальных клипах, тизерах и видеомаппинге.</p>
                <p class="animate-on-scroll fade-in-up delay-2">всегда открыт для ваших предложений и идей!</p>
            </div>
        </section>
    </main>

    <footer class="footer" id="contact">
        <div class="container">
            <ul class="social-links animate-on-scroll fade-in-up delay-1">
                <li><a href="https://www.instagram.com/whoisrulled/" target="_blank" rel="noopener noreferrer">Instagram</a></li>
                <li><a href="https://t.me/rulled" target="_blank" rel="noopener noreferrer">Telegram</a></li>
                <li><a href="mailto:rulled@vk.com">Почта</a></li>
            </ul>
            <p class="copyright animate-on-scroll fade-in-up delay-2">© <span id="year"></span> whoisrulled</p>
        </div>
    </footer>

    <script src="https://player.vimeo.com/api/player.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- Copyright Year ---
            document.getElementById('year').textContent = new Date().getFullYear();

            // --- Sticky Header ---
            const siteHeader = document.getElementById('siteHeader');
            const scrollThreshold = 50; 

            window.addEventListener('scroll', function() {
                if (window.pageYOffset > scrollThreshold) {
                    siteHeader.classList.add('header-visible');
                } else {
                    siteHeader.classList.remove('header-visible');
                }
            });
            
            // --- Blobs Visibility Control ---
            const heroSectionForBlobs = document.getElementById('hero-section');
            const bodyForBlobs = document.body;
            let blobsActivated = false; 

            function toggleBlobs() {
                // console.log("toggleBlobs function called. blobsActivated: " + blobsActivated); // Для отладки

                if (!heroSectionForBlobs) { // Если нет Hero секции, показываем кляксы сразу
                    if (!bodyForBlobs.classList.contains('blobs-visible')) {
                        bodyForBlobs.classList.add('blobs-visible');
                        // console.log("Class 'blobs-visible' ADDED to body (no hero)."); // Для отладки
                    }
                    blobsActivated = true; 
                    window.removeEventListener('scroll', toggleBlobs); // Больше не нужно проверять
                    return;
                }

                const heroRect = heroSectionForBlobs.getBoundingClientRect();
                
                // Кляксы появляются, когда низ Hero секции почти ушел за верхнюю границу экрана
                if (heroRect.bottom < 50) { // 50px - небольшой буфер
                    if (!blobsActivated) { 
                        bodyForBlobs.classList.add('blobs-visible');
                        // console.log("Class 'blobs-visible' ADDED to body."); // Для отладки
                        blobsActivated = true; 
                        // Если кляксы не должны исчезать, можно удалить слушатель:
                        // window.removeEventListener('scroll', toggleBlobs); 
                    }
                } else {
                    // Если нужно, чтобы кляксы исчезали при возврате на Hero (сейчас они остаются видимыми после активации)
                    // if (blobsActivated && heroRect.bottom >= 50) { 
                    //      bodyForBlobs.classList.remove('blobs-visible');
                    //      console.log("Class 'blobs-visible' REMOVED from body."); // Для отладки
                    //      blobsActivated = false; 
                    // }
                }
            }
            
            toggleBlobs(); // Первоначальная проверка при загрузке
            window.addEventListener('scroll', toggleBlobs);


            // --- Burger Menu (Compact Dropdown) ---
            const burgerMenu = document.getElementById('burgerMenu');
            const mainNav = document.getElementById('mainNav');

            burgerMenu.addEventListener('click', function() {
                const isExpanded = burgerMenu.getAttribute('aria-expanded') === 'true' || false;
                burgerMenu.setAttribute('aria-expanded', !isExpanded);
                burgerMenu.classList.toggle('active');
                mainNav.classList.toggle('active'); 
            });

            document.addEventListener('click', function(event) {
                const isClickInsideNav = mainNav.contains(event.target);
                const isClickOnBurger = burgerMenu.contains(event.target);

                if (!isClickInsideNav && !isClickOnBurger && mainNav.classList.contains('active')) {
                    burgerMenu.click();
                }
            });


            // --- Smooth Scroll & Active Link Highlighting & Close Mobile Menu ---
            const navLinks = document.querySelectorAll('.main-nav a[href^="#"]');
            const sections = [];
            navLinks.forEach(link => {
                const sectionId = link.getAttribute('href');
                const section = document.querySelector(sectionId);
                if (section) {
                    sections.push(section);
                }
            });
             if (!sections.find(s => s.id === 'hero-section') && document.getElementById('hero-section')) {
                sections.unshift(document.getElementById('hero-section'));
            }


            navLinks.forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);

                    if (targetElement) {
                        const headerOffset = siteHeader.classList.contains('header-visible') ? siteHeader.offsetHeight : 0;
                        const elementPosition = targetElement.getBoundingClientRect().top;
                        const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

                        window.scrollTo({
                            top: offsetPosition,
                            behavior: "smooth"
                        });

                        if (mainNav.classList.contains('active') && window.innerWidth <= 1024) {
                             burgerMenu.click(); 
                        }
                    }
                });
            });

            function updateActiveLink() {
                let currentSectionId = '';
                const headerHeight = siteHeader.offsetHeight;
                const offsetTriggerPoint = window.innerHeight * 0.4; 

                sections.forEach(section => {
                    const sectionTop = section.offsetTop - headerHeight - offsetTriggerPoint;
                    const sectionBottom = sectionTop + section.offsetHeight;
                    
                    if (window.pageYOffset >= sectionTop && window.pageYOffset < sectionBottom) {
                        currentSectionId = '#' + section.id;
                    }
                });
                
                if (!currentSectionId) {
                    if (window.pageYOffset < sections[0].offsetTop - headerHeight - offsetTriggerPoint) {
                        currentSectionId = '#' + sections[0].id;
                    } else if (window.pageYOffset + window.innerHeight >= document.documentElement.scrollHeight - 50) { 
                        currentSectionId = '#' + sections[sections.length -1].id;
                    }
                }

                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === currentSectionId) {
                        link.classList.add('active');
                    }
                });
            }
            
            window.addEventListener('scroll', updateActiveLink);
            window.addEventListener('resize', updateActiveLink); 
            updateActiveLink(); 

            // --- Vimeo Aspect Ratio ---
            const vimeoIframes = document.querySelectorAll('iframe[id^="vimeo-player-"]');
            vimeoIframes.forEach(iframe => {
                const player = new Vimeo.Player(iframe);
                const wrapper = iframe.parentElement; 

                player.ready().then(() => {
                    return player.getVideoWidth();
                }).then(videoWidth => {
                    player.getVideoHeight().then(videoHeight => {
                        if (videoWidth > 0 && videoHeight > 0) {
                            const aspectRatio = (videoHeight / videoWidth) * 100;
                            wrapper.style.paddingTop = aspectRatio + '%';
                        }
                    });
                }).catch(function(error) {
                    // console.error('Error adjusting Vimeo aspect ratio for player ' + iframe.id + ':', error);
                });
            });

            // --- Scroll-triggered Animations ---
            const animatedElements = document.querySelectorAll('.animate-on-scroll');
            const observerOptions = {
                root: null,
                rootMargin: '0px',
                threshold: 0.1 
            };

            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);

            animatedElements.forEach(el => {
                observer.observe(el);
            });
        });
    </script>

</body>
</html>